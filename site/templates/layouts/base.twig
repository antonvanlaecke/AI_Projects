<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ page.title|default('AI Portfolio') }}{% endblock %}</title>
    <meta name="description" content="{{ page.meta_description|default(page.summary)|default('AI-powered portfolio showcase') }}">
    <script>
        (function() {
            try {
                var savedTheme = localStorage.getItem('theme');
                var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                var theme = savedTheme || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            } catch (err) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    {% if config is defined and config.urls.assets is defined %}
        {% set defaultAssetsBase = config.urls.assets %}
    {% else %}
        {% set defaultAssetsBase = '/site/assets/' %}
    {% endif %}
    {% set assets_base = asset_base|default(defaultAssetsBase) %}
    <link rel="stylesheet" href="{{ assets_base ~ 'css/style.css' }}">
    <link rel="stylesheet" href="{{ assets_base ~ 'css/dark.css' }}">
</head>
<body>
    <header>
        <nav aria-label="Primary">
            {% set fallbackNav = [
                {'label': 'Home', 'url': '/' },
                {'label': 'Projects', 'url': '/projects/' },
                {'label': 'Skills', 'url': '/skills/' },
                {'label': 'About', 'url': '/about/' }
            ] %}
            {% set navItems = navigation|default(fallbackNav) %}
            <ul>
                {% for item in navItems %}
                    <li><a href="{{ item.url }}">{{ item.label }}</a></li>
                {% endfor %}
            </ul>
        </nav>
        <button id="theme-switcher" class="theme-switcher" type="button" aria-pressed="false" aria-label="Toggle color theme">
            <span class="theme-switcher__icon" aria-hidden="true">ðŸŒ™</span>
            <span class="theme-switcher__label">Toggle Theme</span>
        </button>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>&copy; {{ "now"|date("Y") }} {{ page.owner|default('Gemini AI Portfolio') }}</p>
    </footer>
    <script src="{{ assets_base ~ 'js/theme.js' }}"></script>
</body>
</html>
